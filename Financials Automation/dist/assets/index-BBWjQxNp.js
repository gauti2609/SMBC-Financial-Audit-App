import{u as ae,c as te,r as p,j as e,o as re,z as l,s as B,e as ne,n as f}from"./index-HyfZDTXf.js";import{u as S,L as le,g as ie,d as de,h as U,i as oe,f as ce}from"./Layout-tNQcTW0Y.js";import{u as j,a as O,b as R}from"./zod-DIWepabP.js";import{F as me}from"./PencilIcon-DKVLbX6N.js";import{F as xe}from"./TrashIcon-CLoa2qnK.js";const I=re({ledgerName:B().min(1,"Ledger name is required"),openingBalanceCY:f().default(0),debitCY:f().default(0),creditCY:f().default(0),closingBalanceCY:f().default(0),closingBalancePY:f().default(0),type:ne(["BS","PL"]),majorHead:B().optional(),minorHead:B().optional(),grouping:B().optional()});function ue({entry:a,onSubmit:o,onCancel:N,majorHeads:u,minorHeads:P,groupings:H,isLoading:v}){const{register:r,handleSubmit:w,formState:{errors:i},watch:m}=O({resolver:R(I),defaultValues:{ledgerName:a.ledgerName,openingBalanceCY:Number(a.openingBalanceCY),debitCY:Number(a.debitCY),creditCY:Number(a.creditCY),closingBalancePY:Number(a.closingBalancePY),type:a.type,majorHead:a.majorHead,minorHead:a.minorHead,grouping:a.grouping}}),g=m("openingBalanceCY"),h=m("debitCY"),b=m("creditCY"),n=t=>new Intl.NumberFormat("en-IN",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return e.jsxs("form",{onSubmit:w(o),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ledger Name *"}),e.jsx("input",{...r("ledgerName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter ledger name"}),i.ledgerName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.ledgerName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{...r("type"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"BS",children:"Balance Sheet"}),e.jsx("option",{value:"PL",children:"P&L Statement"})]}),i.type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Major Head"}),e.jsxs("select",{...r("majorHead"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select major head"}),u?.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minor Head"}),e.jsxs("select",{...r("minorHead"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select minor head"}),P?.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grouping"}),e.jsxs("select",{...r("grouping"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select grouping"}),H?.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening Balance (CY)"}),e.jsx("input",{...r("openingBalanceCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Debit (CY)"}),e.jsx("input",{...r("debitCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit (CY)"}),e.jsx("input",{...r("creditCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Balance (PY)"}),e.jsx("input",{...r("closingBalancePY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Calculated Closing Balance (CY): ",e.jsxs("strong",{children:["â‚¹",n((g||0)+(h||0)-(b||0))]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50",children:v?"Updating...":"Update Entry"})]})]})]})}function je(){const a=ae(),{currentCompany:o}=te(),[N,u]=p.useState(!1),[P,H]=p.useState(null),[v,r]=p.useState(!1),[w,i]=p.useState(0),[m,g]=p.useState(null),[h,b]=p.useState(null),n=S(a.getTrialBalance.queryOptions({companyId:o?.id||""})),t=S(a.getMajorHeads.queryOptions()),F=S(a.getMinorHeads.queryOptions()),T=S(a.getGroupings.queryOptions()),C=j({...a.uploadTrialBalance.mutationOptions(),onSuccess:()=>{l.success("Trial Balance uploaded successfully!"),n.refetch(),u(!1)},onError:s=>{l.error("Failed to upload trial balance: "+s.message)}}),$=j({...a.getTrialBalanceUploadUrl.mutationOptions(),onError:s=>{l.error("Failed to get upload URL: "+s.message),r(!1)}}),q=j({...a.processTrialBalanceFile.mutationOptions(),onSuccess:s=>{l.success(`Successfully uploaded ${s.entriesProcessed} trial balance entries!`),n.refetch(),r(!1),i(0)},onError:s=>{l.error("Failed to process file: "+s.message),r(!1),i(0)}}),A=j({...a.updateTrialBalanceEntry.mutationOptions(),onSuccess:()=>{l.success("Entry updated successfully!"),n.refetch(),g(null)},onError:s=>{l.error("Failed to update entry: "+s.message)}}),k=j({...a.deleteTrialBalanceEntry.mutationOptions(),onSuccess:()=>{l.success("Entry deleted successfully!"),n.refetch(),b(null)},onError:s=>{l.error("Failed to delete entry: "+s.message)}}),{register:c,handleSubmit:G,reset:D,formState:{errors:Y},watch:E}=O({resolver:R(I),defaultValues:{openingBalanceCY:0,debitCY:0,creditCY:0,closingBalanceCY:0,closingBalancePY:0}}),Q=E("openingBalanceCY"),z=E("debitCY"),V=E("creditCY"),L=async s=>{if(!s)return;if(!o?.id){l.error("Please select a company first");return}if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(s.type)){l.error("Please upload a valid Excel (.xlsx, .xls) or CSV file");return}r(!0),i(10);try{const{uploadUrl:y,objectName:M}=await $.mutateAsync({fileName:s.name,fileType:s.type});if(i(30),!(await fetch(y,{method:"PUT",body:s,headers:{"Content-Type":s.type}})).ok)throw new Error("Failed to upload file");i(60),await q.mutateAsync({objectName:M,companyId:o.id}),i(100)}catch(y){console.error("Upload error:",y),r(!1),i(0)}},W=s=>{s.preventDefault(),s.stopPropagation()},J=s=>{s.preventDefault(),s.stopPropagation();const d=Array.from(s.dataTransfer.files);d.length>0&&L(d[0])},K=s=>{const d=Array.from(s.target.files||[]);d.length>0&&L(d[0])},X=s=>{g({...s,majorHead:s.majorHead?.name||"",minorHead:s.minorHead?.name||"",grouping:s.grouping?.name||""})},Z=async s=>{if(!m)return;const d=(s.openingBalanceCY||0)+(s.debitCY||0)-(s.creditCY||0);await A.mutateAsync({...s,id:m.id,closingBalanceCY:d})},_=async s=>{await k.mutateAsync({id:s})},ee=async s=>{if(!o?.id){l.error("Please select a company first");return}const d=(s.openingBalanceCY||0)+(s.debitCY||0)-(s.creditCY||0),y={...s,closingBalanceCY:d};try{await C.mutateAsync({companyId:o.id,entries:[y]}),D()}catch{}},se=()=>{if(!o?.id){l.error("Please select a company first");return}const s=[{ledgerName:"Cash at Bank",openingBalanceCY:5e4,debitCY:25e3,creditCY:15e3,closingBalanceCY:6e4,closingBalancePY:45e3,type:"BS",majorHead:"Cash and Cash Equivalents",minorHead:"Bank Balances",grouping:"Balances with banks"},{ledgerName:"Sales Revenue",openingBalanceCY:0,debitCY:5e3,creditCY:5e5,closingBalanceCY:-495e3,closingBalancePY:-45e4,type:"PL",majorHead:"Revenue from Operations",minorHead:"Sale of Goods",grouping:"Sale of products"},{ledgerName:"Trade Receivables",openingBalanceCY:75e3,debitCY:1e5,creditCY:8e4,closingBalanceCY:95e3,closingBalancePY:7e4,type:"BS",majorHead:"Trade Receivables",minorHead:"Unsecured Receivables",grouping:"Trade receivables outstanding < 6 months"},{ledgerName:"Salary Expenses",openingBalanceCY:0,debitCY:12e4,creditCY:2e3,closingBalanceCY:118e3,closingBalancePY:11e4,type:"PL",majorHead:"Employee Benefits Expense",minorHead:"Salaries and Wages",grouping:"Salaries and wages"}];C.mutate({companyId:o.id,entries:s})},x=s=>new Intl.NumberFormat("en-IN",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(s);return e.jsx(le,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Trial Balance Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload and manage your trial balance data for financial statement generation"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:se,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Load Sample Data"}),e.jsxs("button",{onClick:()=>u(!N),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Entry"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Excel File"}),v?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Processing file..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w,"% complete"]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-indigo-400 transition-colors cursor-pointer",onDragOver:W,onDrop:J,onClick:()=>document.getElementById("file-upload")?.click(),children:[e.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop your Excel file here, or"}),e.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"browse to upload"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supports .xlsx, .xls and .csv files"}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:K})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Expected Format:"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Columns: Ledger Name, Opening Balance CY, Debit CY, Credit CY, Closing Balance CY, Closing Balance PY, Type (BS/PL), Major Head, Minor Head, Grouping"})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(U,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.data?.length||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Entries"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"BS"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.data?.filter(s=>s.type==="BS").length||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Balance Sheet"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"PL"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.data?.filter(s=>s.type==="PL").length||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"P&L Statement"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-full mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"â‚¹"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:x(n.data?.reduce((s,d)=>s+Math.abs(Number(d.closingBalanceCY)),0)||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"})]})})]})})]}),N&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Entry"}),e.jsxs("form",{onSubmit:G(ee),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ledger Name *"}),e.jsx("input",{...c("ledgerName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter ledger name"}),Y.ledgerName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.ledgerName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{...c("type"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"BS",children:"Balance Sheet"}),e.jsx("option",{value:"PL",children:"P&L Statement"})]}),Y.type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Major Head"}),e.jsxs("select",{...c("majorHead"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select major head"}),t.data?.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minor Head"}),e.jsxs("select",{...c("minorHead"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select minor head"}),F.data?.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grouping"}),e.jsxs("select",{...c("grouping"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select grouping"}),T.data?.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening Balance (CY)"}),e.jsx("input",{...c("openingBalanceCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Debit (CY)"}),e.jsx("input",{...c("debitCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit (CY)"}),e.jsx("input",{...c("creditCY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Balance (PY)"}),e.jsx("input",{...c("closingBalancePY",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Calculated Closing Balance (CY): ",e.jsxs("strong",{children:["â‚¹",x((Q||0)+(z||0)-(V||0))]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),D()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:C.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50",children:C.isPending?"Adding...":"Add Entry"})]})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Trial Balance Entry"}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(oe,{className:"h-6 w-6"})})]}),e.jsx(ue,{entry:m,onSubmit:Z,onCancel:()=>g(null),majorHeads:t.data||[],minorHeads:F.data||[],groupings:T.data||[],isLoading:A.isPending})]})})}),h&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ce,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Entry"})})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this trial balance entry? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>b(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>h&&_(h),disabled:k.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",children:k.isPending?"Deleting...":"Delete"})]})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Trial Balance Entries"})}),n.data&&n.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ledger Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Major Head"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Minor Head"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opening (CY)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit (CY)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit (CY)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closing (CY)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closing (PY)"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.ledgerName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.grouping?.name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.type==="BS"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:s.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.majorHead?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.minorHead?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["â‚¹",x(Number(s.openingBalanceCY))]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["â‚¹",x(Number(s.debitCY))]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["â‚¹",x(Number(s.creditCY))]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right",children:e.jsxs("span",{className:Number(s.closingBalanceCY)<0?"text-red-600":"text-gray-900",children:["â‚¹",x(Number(s.closingBalanceCY))]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["â‚¹",x(Number(s.closingBalancePY))]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>X(s),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"Edit entry",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(s.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete entry",children:e.jsx(xe,{className:"h-4 w-4"})})]})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No trial balance data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload an Excel file or add entries manually to get started."}),e.jsx("button",{onClick:()=>u(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Add First Entry"})]})]})]})})}export{je as component};
