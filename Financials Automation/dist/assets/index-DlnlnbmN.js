import{r as i,u as b,o as y,z as o,j as e,s as j}from"./index-HyfZDTXf.js";import{a as f,b as v,u as N}from"./zod-DIWepabP.js";import{u as w,L,q as E,r as A}from"./Layout-tNQcTW0Y.js";function S({title:l,titleId:a,...r},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?i.createElement("title",{id:a},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const k=i.forwardRef(S),R=y({licenseKey:j().min(1,"License key is required")});function T(){const l=b(),[a,r]=i.useState(""),[n,c]=i.useState(!1),{register:x,handleSubmit:h,formState:{errors:m},reset:g}=f({resolver:v(R)}),d=N(l.validateLicense.mutationOptions({onSuccess:t=>{o.success("License validated successfully!"),c(!0),localStorage.setItem("licenseKey",a)},onError:t=>{o.error(t.message||"License validation failed"),c(!1)}})),s=w(l.getLicenseInfo.queryOptions({licenseKey:a},{enabled:!!a&&n,retry:!1})),u=async t=>{r(t.licenseKey),await d.mutateAsync({licenseKey:t.licenseKey,clientIp:void 0})},p=()=>{r(""),c(!1),localStorage.removeItem("licenseKey"),g(),o.success("License cleared")};return i.useEffect(()=>{const t=localStorage.getItem("licenseKey");t&&(r(t),c(!0))},[]),e.jsx(L,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"License Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your software license for network deployment and centralized database access."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(k,{className:"h-6 w-6 text-indigo-600 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Enter License Key"})]}),e.jsxs("form",{onSubmit:h(u),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"licenseKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"License Key"}),e.jsx("input",{...x("licenseKey"),type:"text",placeholder:"Enter your license key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),m.licenseKey&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.licenseKey.message})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:d.isPending,className:"flex-1 bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?"Validating...":"Validate License"}),a&&e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Clear"})]})]})]}),n&&s.data&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(E,{className:"h-6 w-6 text-green-600 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"License Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Company Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.data.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Contact Email"}),e.jsx("p",{className:"text-gray-900",children:s.data.contactEmail})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Max Users"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.data.maxUsers})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Max Companies"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.data.maxCompanies})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Active Users"}),e.jsx("p",{className:"text-lg text-blue-600",children:s.data.activeUsers})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Active Companies"}),e.jsx("p",{className:"text-lg text-blue-600",children:s.data.activeCompanies})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Issued Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.data.issuedAt).toLocaleDateString()})]}),s.data.expiresAt&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Expires On"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.data.expiresAt).toLocaleDateString()})]}),s.data.lastUsedAt&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Used"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.data.lastUsedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center pt-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${s.data.isActive?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`font-medium ${s.data.isActive?"text-green-700":"text-red-700"}`,children:s.data.isActive?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(A,{className:"h-6 w-6 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Network Deployment Setup"})]}),e.jsxs("div",{className:"prose text-sm text-gray-700",children:[e.jsx("p",{className:"mb-4",children:"To set up this application for network deployment with a centralized database:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mb-4",children:[e.jsx("li",{children:"Ensure your license is validated above"}),e.jsx("li",{children:"Configure the central server with the database exposed on port 5432"}),e.jsxs("li",{children:["Update the ",e.jsx("code",{children:"DATABASE_URL"})," environment variable on client instances to point to the central server"]}),e.jsxs("li",{children:["Example: ",e.jsx("code",{children:"DATABASE_URL=postgresql://postgres:postgres@192.168.1.100:5432/app"})]}),e.jsx("li",{children:"Start client instances with the updated configuration"})]}),e.jsxs("div",{className:"bg-white rounded border border-blue-200 p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Environment Variables for Client Instances:"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:`DATABASE_URL=postgresql://postgres:postgres@[CENTRAL_SERVER_IP]:5432/app
BASE_URL=http://[CENTRAL_SERVER_IP]:8000
JWT_SECRET=[SAME_AS_CENTRAL_SERVER]`})]})]})]})]})})}export{T as component};
