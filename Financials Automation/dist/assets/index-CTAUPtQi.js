import{u as w,b as v,j as e}from"./index-HyfZDTXf.js";import{u as I,L as d,q as c,n as x,f as h,o as p,a as g,c as j,m as b,b as S}from"./Layout-tNQcTW0Y.js";import{F as u}from"./XCircleIcon--1cEXXGA.js";import{F as C}from"./InformationCircleIcon-dadFmOSF.js";import"./zod-DIWepabP.js";function q(){const y=w(),{selectedCompanyId:o,selectedCompany:l}=v(),t=I(o?y.validateScheduleIIICompliance.queryOptions({companyId:o}):{enabled:!1}),i=a=>{switch(a){case"pass":return e.jsx(S,{className:"h-6 w-6 text-green-600"});case"fail":return e.jsx(u,{className:"h-6 w-6 text-red-600"});case"warning":return e.jsx(h,{className:"h-6 w-6 text-yellow-600"})}},n=a=>{switch(a){case"pass":return"bg-green-100 text-green-800";case"fail":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800"}},N=a=>{switch(a){case"error":return e.jsx(u,{className:"h-5 w-5 text-red-600"});case"warning":return e.jsx(h,{className:"h-5 w-5 text-yellow-600"});case"info":return e.jsx(C,{className:"h-5 w-5 text-blue-600"})}};if(!o)return e.jsx(d,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Schedule III Compliance Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and ensure compliance with Schedule III disclosure requirements"})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(x,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Company Selection Required"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-blue-800",children:"Please select a company from the header to view its Schedule III compliance status."}),e.jsxs("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Getting Started:"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:"Select an existing company from the dropdown in the header"}),e.jsx("li",{children:'Or create a new company using the "Create New Company" option'}),e.jsx("li",{children:"Once selected, the compliance dashboard will show data for that company"})]})]})]})]})]})});if(t.isLoading)return e.jsx(d,{children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Validating Schedule III compliance..."})]})})});if(t.isError)return e.jsx(d,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Schedule III Compliance Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Monitor and ensure compliance with Schedule III disclosure requirements",l&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:["• ",l.displayName]})]})]})]})}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(u,{className:"h-8 w-8 text-red-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-red-900",children:"Compliance Module Error"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-red-800",children:"The Schedule III compliance validation failed to load. This could be due to:"}),e.jsxs("ul",{className:"list-disc list-inside text-red-700 space-y-2",children:[e.jsx("li",{children:"Database connection issues"}),e.jsx("li",{children:"Missing required data (trial balance, entity information, etc.)"}),e.jsx("li",{children:"Server configuration problems"})]}),e.jsxs("div",{className:"bg-red-100 border border-red-300 rounded-lg p-4 mt-4",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Technical Details:"}),e.jsx("pre",{className:"text-sm text-red-800 whitespace-pre-wrap",children:t.error?.message||"Unknown error occurred"})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>t.refetch(),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Retry Validation"}),e.jsx("a",{href:"/common-control",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Setup Entity Information"}),e.jsx("a",{href:"/trial-balance",className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Upload Trial Balance"}),e.jsx("a",{href:"/compliance-dashboard/debug",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Run Diagnostics"})]})]})]})]})});const s=t.data;return s?e.jsx(d,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Schedule III Compliance Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Monitor and ensure compliance with Schedule III disclosure requirements",l&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:["• ",l.displayName]})]})]})]})}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Overall Compliance Status"}),e.jsx("div",{className:`px-4 py-2 rounded-full text-lg font-medium ${s.overallStatus==="compliant"?"bg-green-100 text-green-800":s.overallStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.overallStatus==="compliant"?"Compliant":s.overallStatus==="partial"?"Partial Compliance":"Non-Compliant"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-indigo-600 mb-2",children:[s.complianceScore,"%"]}),e.jsx("p",{className:"text-gray-600",children:"Compliance Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:s.passedChecks}),e.jsx("p",{className:"text-gray-600",children:"Checks Passed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-red-600 mb-2",children:s.issues.filter(a=>a.severity==="error").length}),e.jsx("p",{className:"text-gray-600",children:"Critical Issues"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:`h-3 rounded-full ${s.complianceScore>=90?"bg-green-500":s.complianceScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.complianceScore}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[s.passedChecks," of ",s.totalChecks," compliance checks passed"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Compliance Categories"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(x,{className:"h-8 w-8 text-blue-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Entity Information"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.entityInformation),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.entityInformation)}`,children:s.summary.entityInformation.toUpperCase()})]})]})]}),e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(p,{className:"h-8 w-8 text-purple-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Note Selections"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.noteSelections),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.noteSelections)}`,children:s.summary.noteSelections.toUpperCase()})]})]})]}),e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(g,{className:"h-8 w-8 text-green-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Financial Statements"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.financialStatements),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.financialStatements)}`,children:s.summary.financialStatements.toUpperCase()})]})]})]}),e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(j,{className:"h-8 w-8 text-orange-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Aging Schedules"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.agingSchedules),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.agingSchedules)}`,children:s.summary.agingSchedules.toUpperCase()})]})]})]}),e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(b,{className:"h-8 w-8 text-indigo-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Ratio Analysis"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.ratioAnalysis),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.ratioAnalysis)}`,children:s.summary.ratioAnalysis.toUpperCase()})]})]})]}),e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx(g,{className:"h-8 w-8 text-red-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Mandatory Disclosures"}),e.jsxs("div",{className:"flex items-center mt-1",children:[i(s.summary.mandatoryDisclosures),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n(s.summary.mandatoryDisclosures)}`,children:s.summary.mandatoryDisclosures.toUpperCase()})]})]})]})]})]}),s.issues.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Issues and Recommendations"}),e.jsx("div",{className:"space-y-6",children:["error","warning","info"].map(a=>{const m=s.issues.filter(r=>r.severity===a);return m.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium mb-3 ${a==="error"?"text-red-800":a==="warning"?"text-yellow-800":"text-blue-800"}`,children:[a==="error"?"Critical Issues":a==="warning"?"Warnings":"Information",e.jsxs("span",{className:"ml-2 text-sm",children:["(",m.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:m.map((r,f)=>e.jsx("div",{className:`border rounded-lg p-4 ${a==="error"?"border-red-200 bg-red-50":a==="warning"?"border-yellow-200 bg-yellow-50":"border-blue-200 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start",children:[N(r.severity),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.issue}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.recommendation}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Category: ",r.category]}),r.noteRef&&e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["Note: ",r.noteRef]})]})]})})})]})},f))})]},a)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("a",{href:"/common-control",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(x,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Entity Settings"})]}),e.jsxs("a",{href:"/notes-selection",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(p,{className:"h-6 w-6 text-purple-600 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Note Selection"})]}),e.jsxs("a",{href:"/aging-schedules",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(j,{className:"h-6 w-6 text-orange-600 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Aging Schedules"})]}),e.jsxs("a",{href:"/ratio-analysis",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(b,{className:"h-6 w-6 text-indigo-600 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Ratio Analysis"})]})]})]})]})]})}):e.jsx(d,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Schedule III Compliance Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Monitor and ensure compliance with Schedule III disclosure requirements",l&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:["• ",l.displayName]})]})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(h,{className:"h-8 w-8 text-yellow-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-yellow-900",children:"No Compliance Data Available"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-yellow-800",children:"The compliance validation completed but returned no data. This usually means:"}),e.jsxs("ul",{className:"list-disc list-inside text-yellow-700 space-y-2",children:[e.jsx("li",{children:"The database is empty or not properly initialized"}),e.jsx("li",{children:"Required master data (major heads, groupings) is missing"}),e.jsx("li",{children:"The compliance validation procedure returned null/undefined"})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>t.refetch(),className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:"Retry Validation"}),e.jsx("a",{href:"/common-control",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Initialize Entity Data"}),e.jsx("a",{href:"/compliance-dashboard/debug",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Run Diagnostics"})]})]})]})]})})}export{q as component};
