import{u as N,z as g,j as e}from"./index-HyfZDTXf.js";import{u as o,L as x,a as m,f as y,l as b}from"./Layout-tNQcTW0Y.js";import{u as v}from"./zod-DIWepabP.js";import{F as f,a as u}from"./ShareIcon-B0PFCHYT.js";function P(){const l=N(),h=o(l.generateCashFlow.queryOptions()),j=o(l.getCommonControl.queryOptions()),d=v({...l.exportCashFlow.mutationOptions(),onSuccess:r=>{g.success("Cash Flow exported successfully!"),window.open(r.downloadUrl,"_blank")},onError:r=>{g.error("Failed to export cash flow: "+r.message)}}),n=o(l.validateFinancialStatementFormat.queryOptions({statementType:"cash_flow"})),p=()=>{d.mutate({format:"xlsx"})},i=r=>new Intl.NumberFormat("en-IN",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(Math.abs(r)),a=(r,c="Brackets")=>{if(r>=0)return i(r);switch(c){case"Red":return e.jsx("span",{className:"text-red-600",children:i(r)});case"Minus":return`-${i(r)}`;default:return`(${i(r)})`}},t=j.data,s=h.data;return h.isLoading?e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Generating Cash Flow Statement..."})]})})}):s?e.jsx(x,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Cash Flow Statement"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["For the year ended ",t?.financialYearEnd?new Date(t.financialYearEnd).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"March 31, 2024"]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx("span",{children:"Print"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(u,{className:"h-5 w-5"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{onClick:p,disabled:d.isPending,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{children:d.isPending?"Exporting...":"Export to Excel"})]})]})]})}),n.data&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule III Compliance"}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.data.formatCompliant?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.data.formatCompliant?"Compliant":"Issues Found"})]}),n.data.issues.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Issues to Address:"}),e.jsx("ul",{className:"space-y-1",children:n.data.issues.map((r,c)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start",children:[e.jsx(y,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),r]},c))})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-8",style:{fontFamily:t?.defaultFont||"Bookman Old Style, serif"},children:[e.jsxs("div",{className:"text-center mb-8 border-b border-gray-200 pb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t?.entityName||"Entity Name"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t?.address||"Entity Address"}),t?.cinNumber&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["CIN: ",t.cinNumber]}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:["Cash Flow Statement for the year ended ",t?.financialYearEnd?new Date(t.financialYearEnd).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"March 31, 2024"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["(All amounts in ",t?.currency||"INR"," ",t?.units||"Millions",")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-900",style:{width:"70%"},children:"Particulars"}),e.jsx("th",{className:"text-right py-3 font-semibold text-gray-900",style:{width:"15%"},children:"Current Year"}),e.jsx("th",{className:"text-right py-3 font-semibold text-gray-900",style:{width:"15%"},children:"Previous Year"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-4",children:e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"A. CASH FLOWS FROM OPERATING ACTIVITIES"})})}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Net profit/(loss) before tax"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.netProfit,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.netProfitPY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 font-medium text-gray-800",children:"Adjustments for:"}),e.jsx("td",{}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 pl-8 text-gray-800",children:"Depreciation and amortization"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.depreciation,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.depreciationPY||0,t?.negativeColor)})]}),e.jsxs("tr",{className:"border-t border-gray-200",children:[e.jsx("td",{className:"py-2 pl-4 font-medium text-gray-800",children:"Operating profit before working capital changes"}),e.jsx("td",{className:"text-right font-medium text-gray-900",children:a(s.operatingActivities.netProfit+s.operatingActivities.depreciation,t?.negativeColor)}),e.jsx("td",{className:"text-right font-medium text-gray-900",children:a((s.operatingActivities.netProfitPY||0)+(s.operatingActivities.depreciationPY||0),t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 font-medium text-gray-800",children:"Changes in working capital:"}),e.jsx("td",{}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 pl-8 text-gray-800",children:"(Increase)/decrease in trade receivables"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.receivablesChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.receivablesChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 pl-8 text-gray-800",children:"(Increase)/decrease in inventories"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.inventoryChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.inventoryChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 pl-8 text-gray-800",children:"Increase/(decrease) in trade payables"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.payablesChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.operatingActivities.payablesChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{className:"border-t border-gray-200",children:[e.jsx("td",{className:"py-2 pl-4 font-semibold text-gray-900",children:"Cash generated from operations"}),e.jsx("td",{className:"text-right font-semibold text-gray-900",children:a(s.operatingActivities.total,t?.negativeColor)}),e.jsx("td",{className:"text-right font-semibold text-gray-900",children:a(s.operatingActivities.totalPY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 pl-8 text-gray-800",children:"Direct taxes paid"}),e.jsx("td",{className:"text-right text-gray-900",children:"--"}),e.jsx("td",{className:"text-right text-gray-900",children:"--"})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 font-bold text-gray-900",children:"Net cash from operating activities (A)"}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.operatingActivities.total,t?.negativeColor)}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.operatingActivities.totalPY||0,t?.negativeColor)})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-6",children:e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"B. CASH FLOWS FROM INVESTING ACTIVITIES"})})}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Purchase of property, plant and equipment"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.investingActivities.ppeAdditions,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.investingActivities.ppeAdditionsPY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Purchase/sale of investments"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.investingActivities.investmentChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.investingActivities.investmentChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 font-bold text-gray-900",children:"Net cash used in investing activities (B)"}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.investingActivities.total,t?.negativeColor)}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.investingActivities.totalPY||0,t?.negativeColor)})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-6",children:e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"C. CASH FLOWS FROM FINANCING ACTIVITIES"})})}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Proceeds from/(repayment of) borrowings"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.financingActivities.borrowingsChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.financingActivities.borrowingsChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Proceeds from issue of equity shares"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.financingActivities.equityChange,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.financingActivities.equityChangePY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-gray-800",children:"Dividends paid"}),e.jsx("td",{className:"text-right text-gray-900",children:"--"}),e.jsx("td",{className:"text-right text-gray-900",children:"--"})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 font-bold text-gray-900",children:"Net cash from financing activities (C)"}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.financingActivities.total,t?.negativeColor)}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.financingActivities.totalPY||0,t?.negativeColor)})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 font-bold text-gray-900",children:"Net increase/(decrease) in cash and cash equivalents (A+B+C)"}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.netCashFlow,t?.negativeColor)}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.netCashFlowPY||0,t?.negativeColor)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-800",children:"Cash and cash equivalents at the beginning of the year"}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.openingCash,t?.negativeColor)}),e.jsx("td",{className:"text-right text-gray-900",children:a(s.openingCash-(s.netCashFlowPY||0),t?.negativeColor)})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 font-bold text-gray-900",children:"Cash and cash equivalents at the end of the year"}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.closingCash,t?.negativeColor)}),e.jsx("td",{className:"text-right font-bold text-gray-900",children:a(s.openingCash,t?.negativeColor)})]})]})]})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Director"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Company Secretary"})]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${s.operatingActivities.total>=0?"text-green-600":"text-red-600"}`,children:["₹",i(s.operatingActivities.total)]}),e.jsx("p",{className:"text-gray-600",children:"Operating Cash Flow"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${s.investingActivities.total>=0?"text-green-600":"text-red-600"}`,children:["₹",i(s.investingActivities.total)]}),e.jsx("p",{className:"text-gray-600",children:"Investing Cash Flow"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${s.financingActivities.total>=0?"text-green-600":"text-red-600"}`,children:["₹",i(s.financingActivities.total)]}),e.jsx("p",{className:"text-gray-600",children:"Financing Cash Flow"})]})})]})]})}):e.jsx(x,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Cash Flow Statement"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Generate your Schedule III compliant cash flow statement"})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(y,{className:"h-6 w-6 text-amber-600 mt-1"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-medium text-amber-800",children:"No Data Available"}),e.jsx("p",{className:"text-amber-700 mt-1",children:"Please upload trial balance data first to generate the cash flow statement."}),e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:"/trial-balance",className:"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Upload Trial Balance"})})]})]})})]})})}export{P as component};
