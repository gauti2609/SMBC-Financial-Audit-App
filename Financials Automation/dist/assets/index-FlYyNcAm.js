import{u as C,a as I,b as z,r as R,z as d,j as e,L as u}from"./index-HyfZDTXf.js";import{u as m,L as p,F as x,a as y,b as i,c as T,d as $,e as E,f as c}from"./Layout-tNQcTW0Y.js";import{u as B}from"./zod-DIWepabP.js";function q(){const r=C(),{token:b,isAuthenticated:N}=I(),{selectedCompanyId:s}=z(),[h,g]=R.useState(!1),o=N&&!!b&&!!s,n=m(r.getTrialBalance.queryOptions({companyId:s||""},{enabled:o})),t=m(r.getCommonControl.queryOptions({companyId:s||""},{enabled:o})),l=m(r.getNoteSelections.queryOptions({companyId:s||""},{enabled:o})),j=B(r.initializeNoteSelections.mutationOptions({onSuccess:()=>{d.success("Default note selections initialized successfully!"),l.refetch()},onError:a=>{d.error("Failed to initialize note selections: "+a.message)}})),f=async()=>{if(!s){d.error("Please select a company first");return}g(!0);try{await j.mutateAsync({companyId:s})}finally{g(!1)}};if(!s)return e.jsx(p,{children:e.jsx("div",{className:"max-w-2xl mx-auto text-center py-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx(x,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select a Company"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please select or create a company to get started with your financial statements."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use the company selector in the header above to choose an existing company or create a new one."})]})})});const w=[{name:"Trial Balance Entries",value:n.data?.length||0,icon:y,color:"bg-blue-500",change:"+12%",changeType:"increase"},{name:"Selected Notes",value:l.data?.filter(a=>a.userSelected).length||0,icon:i,color:"bg-green-500",change:"+5",changeType:"increase"},{name:"Financial Year",value:t.data?.financialYearEnd?new Date(t.data.financialYearEnd).getFullYear().toString():"Not Set",icon:T,color:"bg-purple-500",change:"Current",changeType:"neutral"},{name:"Entity Configured",value:t.data?.entityName?"Yes":"No",icon:x,color:t.data?.entityName?"bg-green-500":"bg-red-500",change:t.data?.entityName?"Ready":"Pending",changeType:t.data?.entityName?"increase":"decrease"}],v=[{name:"Upload Trial Balance",description:"Import your trial balance data from Excel",href:"/trial-balance",icon:$,color:"bg-blue-600 hover:bg-blue-700"},{name:"Configure Entity",description:"Set up entity details and preferences",href:"/common-control",icon:x,color:"bg-purple-600 hover:bg-purple-700"},{name:"Select Notes",description:"Choose which notes to include in statements",href:"/notes-selection",icon:y,color:"bg-green-600 hover:bg-green-700"},{name:"View Balance Sheet",description:"Generate and review balance sheet",href:"/balance-sheet",icon:E,color:"bg-indigo-600 hover:bg-indigo-700"}],S=[{action:"Trial Balance uploaded",time:"2 hours ago",status:"completed"},{action:"Balance Sheet generated",time:"1 day ago",status:"completed"},{action:"Notes selection updated",time:"2 days ago",status:"completed"},{action:"Entity configuration saved",time:"3 days ago",status:"completed"}];return e.jsx(p,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-8 text-white shadow-xl",children:e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",style:{fontFamily:"Bookman Old Style, serif"},children:"Welcome to Financial Automation"}),e.jsx("p",{className:"text-xl mb-6 text-blue-100",children:"Generate Schedule III compliant financial statements with automated calculations, comprehensive notes, and professional formatting."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(u,{to:"/trial-balance",className:"bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Get Started"}),e.jsx("button",{onClick:f,disabled:h,className:"border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors disabled:opacity-50",children:h?"Initializing...":"Initialize Notes"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map(a=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${a.color} p-3 rounded-lg`,children:e.jsx(a.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.name}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`text-sm ${a.changeType==="increase"?"text-green-600":a.changeType==="decrease"?"text-red-600":"text-gray-600"}`,children:a.change})})]},a.name))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map(a=>e.jsxs(u,{to:a.href,className:`${a.color} text-white p-6 rounded-xl hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1`,children:[e.jsx(a.icon,{className:"h-8 w-8 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.name}),e.jsx("p",{className:"text-sm opacity-90",children:a.description})]},a.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:S.map((a,F)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.action}),e.jsx("p",{className:"text-sm text-gray-500",children:a.time})]})]},F))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Database Connection"}),e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),"Connected"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trial Balance Status"}),e.jsx("span",{className:`flex items-center ${n.data?.length?"text-green-600":"text-yellow-600"}`,children:n.data?.length?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),"Loaded (",n.data.length," entries)"]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-4 w-4 mr-1"}),"Not Loaded"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Entity Configuration"}),e.jsx("span",{className:`flex items-center ${t.data?.entityName?"text-green-600":"text-yellow-600"}`,children:t.data?.entityName?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),"Configured"]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-4 w-4 mr-1"}),"Pending Setup"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Note Selections"}),e.jsx("span",{className:`flex items-center ${l.data?.length?"text-green-600":"text-yellow-600"}`,children:l.data?.length?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),"Ready (",l.data.length," notes)"]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-4 w-4 mr-1"}),"Not Initialized"]})})]})]})]})]}),(!t.data?.entityName||!n.data?.length)&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(c,{className:"h-6 w-6 text-amber-600 mt-1"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-medium text-amber-800",children:"Setup Required"}),e.jsx("p",{className:"text-amber-700 mt-1",children:"To get started with financial statement generation, please complete the following steps:"}),e.jsxs("ul",{className:"mt-3 space-y-1 text-sm text-amber-700",children:[!t.data?.entityName&&e.jsx("li",{children:"• Configure entity details in Common Control"}),!n.data?.length&&e.jsx("li",{children:"• Upload your trial balance data"}),!l.data?.length&&e.jsx("li",{children:"• Initialize note selections (click button above)"})]})]})]})})]})})}export{q as component};
