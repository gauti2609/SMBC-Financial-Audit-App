import{r as u,u as Q,b as Z,z as n,o as W,j as e,g as c,s as d,n as F}from"./index-HyfZDTXf.js";import{u as N,L as J,F as X,n as _,a as ee,p as P,i as T,b as se,f as ae}from"./Layout-tNQcTW0Y.js";import{u as m,a as re,b as te}from"./zod-DIWepabP.js";import{F as G}from"./PencilIcon-DKVLbX6N.js";import{F as Y}from"./TrashIcon-CLoa2qnK.js";function ne({title:i,titleId:l,...p},f){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":l},p),i?u.createElement("title",{id:l},i):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const ie=u.forwardRef(ne),le=W({entityName:d().min(1,"Entity name is required"),address:d().min(1,"Address is required"),cinNumber:d().optional(),financialYearStart:d().min(1,"Financial year start is required"),financialYearEnd:d().min(1,"Financial year end is required"),currency:d().default("INR"),units:d().default("Millions"),numbersFormat:d().default("Accounting"),negativeColor:d().default("Brackets"),defaultFont:d().default("Bookman Old Style"),defaultFontSize:F().min(8).max(72).default(11),showVarianceAnalysis:c().default(!0),showGrowthRates:c().default(!0),showTrendIndicators:c().default(!0),varianceThreshold:F().min(0).max(100).default(25),comparisonLayout:d().default("Detailed"),includeComplianceIndicators:c().default(!0),showNoteNumbers:c().default(!0),includeSummaryStats:c().default(!0),reportHeaderStyle:d().default("Standard"),pageOrientation:d().default("Portrait"),includeSignatureSection:c().default(!0),roundingPrecision:F().min(0).max(4).default(2),zeroDisplayMode:d().default("Dash"),includeComparativeAnalysis:c().default(!0),autoGenerateExplanations:c().default(!0)});function xe(){const i=Q(),{selectedCompanyId:l}=Z(),[p,f]=u.useState(null),[v,w]=u.useState(null),[g,y]=u.useState(null),j=N(l?i.getCommonControl.queryOptions({companyId:l}):{enabled:!1}),b=N(l?i.getMinorHeads.queryOptions({companyId:l}):{enabled:!1}),x=N(i.getMajorHeads.queryOptions()),h=N(i.getGroupings.queryOptions()),S=m({...i.updateCommonControl.mutationOptions(),onSuccess:()=>{n.success("Configuration saved successfully!"),j.refetch()},onError:s=>{n.error("Failed to save configuration: "+s.message)}}),M=m({...i.addMinorHead.mutationOptions(),onSuccess:()=>{n.success("Minor head added successfully!"),b.refetch()},onError:s=>{n.error("Failed to add minor head: "+s.message)}}),O=m({...i.addMajorHead.mutationOptions(),onSuccess:()=>{n.success("Major head added successfully!"),x.refetch()},onError:s=>{n.error("Failed to add major head: "+s.message)}}),H=m({...i.updateMajorHead.mutationOptions(),onSuccess:()=>{n.success("Major head updated successfully!"),x.refetch(),f(null)},onError:s=>{n.error("Failed to update major head: "+s.message)}}),C=m({...i.deleteMajorHead.mutationOptions(),onSuccess:()=>{n.success("Major head deleted successfully!"),x.refetch(),y(null)},onError:s=>{n.error("Failed to delete major head: "+s.message)}}),z=m({...i.addGrouping.mutationOptions(),onSuccess:()=>{n.success("Grouping added successfully!"),h.refetch()},onError:s=>{n.error("Failed to add grouping: "+s.message)}}),V=m({...i.updateGrouping.mutationOptions(),onSuccess:()=>{n.success("Grouping updated successfully!"),h.refetch(),w(null)},onError:s=>{n.error("Failed to update grouping: "+s.message)}}),k=m({...i.deleteGrouping.mutationOptions(),onSuccess:()=>{n.success("Grouping deleted successfully!"),h.refetch(),y(null)},onError:s=>{n.error("Failed to delete grouping: "+s.message)}}),{register:r,handleSubmit:L,reset:E,watch:B,formState:{errors:o,isDirty:$}}=re({resolver:te(le),defaultValues:{currency:"INR",units:"Millions",numbersFormat:"Accounting",negativeColor:"Brackets",defaultFont:"Bookman Old Style",defaultFontSize:11,showVarianceAnalysis:!0,showGrowthRates:!0,showTrendIndicators:!0,varianceThreshold:25,comparisonLayout:"Detailed",includeComplianceIndicators:!0,showNoteNumbers:!0,includeSummaryStats:!0,reportHeaderStyle:"Standard",pageOrientation:"Portrait",includeSignatureSection:!0,roundingPrecision:2,zeroDisplayMode:"Dash",includeComparativeAnalysis:!0,autoGenerateExplanations:!0}});u.useEffect(()=>{if(j.data){const s=j.data;E({entityName:s.entityName||"",address:s.address||"",cinNumber:s.cinNumber||"",financialYearStart:s.financialYearStart?new Date(s.financialYearStart).toISOString().split("T")[0]:"",financialYearEnd:s.financialYearEnd?new Date(s.financialYearEnd).toISOString().split("T")[0]:"",currency:s.currency,units:s.units,numbersFormat:s.numbersFormat,negativeColor:s.negativeColor,defaultFont:s.defaultFont,defaultFontSize:s.defaultFontSize,showVarianceAnalysis:s.showVarianceAnalysis??!0,showGrowthRates:s.showGrowthRates??!0,showTrendIndicators:s.showTrendIndicators??!0,varianceThreshold:s.varianceThreshold??25,comparisonLayout:s.comparisonLayout??"Detailed",includeComplianceIndicators:s.includeComplianceIndicators??!0,showNoteNumbers:s.showNoteNumbers??!0,includeSummaryStats:s.includeSummaryStats??!0,reportHeaderStyle:s.reportHeaderStyle??"Standard",pageOrientation:s.pageOrientation??"Portrait",includeSignatureSection:s.includeSignatureSection??!0,roundingPrecision:s.roundingPrecision??2,zeroDisplayMode:s.zeroDisplayMode??"Dash",includeComparativeAnalysis:s.includeComparativeAnalysis??!0,autoGenerateExplanations:s.autoGenerateExplanations??!0})}},[j.data,E]);const q=async s=>{if(!l){n.error("Please select a company first");return}try{await S.mutateAsync({companyId:l,...s,financialYearStart:new Date(s.financialYearStart),financialYearEnd:new Date(s.financialYearEnd)})}catch{}},A=s=>{s.trim()&&O.mutate({name:s.trim()})},D=s=>{p&&s.trim()&&H.mutate({id:p.id,name:s.trim()})},U=s=>{C.mutate({id:s})},R=s=>{s.trim()&&z.mutate({name:s.trim()})},I=s=>{v&&s.trim()&&V.mutate({id:v.id,name:s.trim()})},K=s=>{k.mutate({id:s})},a=B();return e.jsx(J,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-8 w-8 text-indigo-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"Bookman Old Style, serif"},children:"Common Control Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure your entity details and financial statement preferences"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("form",{onSubmit:L(q),className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(_,{className:"h-6 w-6 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Entity Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Name *"}),e.jsx("input",{...r("entityName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter entity name"}),o.entityName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.entityName.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("textarea",{...r("address"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter complete address"}),o.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.address.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CIN Number"}),e.jsx("input",{...r("cinNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter CIN number (optional)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ie,{className:"h-6 w-6 text-green-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Year"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{...r("financialYearStart"),type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),o.financialYearStart&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.financialYearStart.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),e.jsx("input",{...r("financialYearEnd"),type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),o.financialYearEnd&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.financialYearEnd.message})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ee,{className:"h-6 w-6 text-purple-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Display Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{...r("currency"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"INR",children:"INR (Indian Rupee)"}),e.jsx("option",{value:"USD",children:"USD (US Dollar)"}),e.jsx("option",{value:"EUR",children:"EUR (Euro)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Units"}),e.jsxs("select",{...r("units"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Actual",children:"Actual"}),e.jsx("option",{value:"Thousands",children:"Thousands"}),e.jsx("option",{value:"Millions",children:"Millions"}),e.jsx("option",{value:"Crores",children:"Crores"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numbers Format"}),e.jsxs("select",{...r("numbersFormat"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Accounting",children:"Accounting"}),e.jsx("option",{value:"Number",children:"Number"}),e.jsx("option",{value:"Currency",children:"Currency"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Negative Display"}),e.jsxs("select",{...r("negativeColor"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Brackets",children:"Brackets (1,000)"}),e.jsx("option",{value:"Red",children:"Red Color"}),e.jsx("option",{value:"Minus",children:"Minus Sign -1,000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Font"}),e.jsxs("select",{...r("defaultFont"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Bookman Old Style",children:"Bookman Old Style"}),e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Calibri",children:"Calibri"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Size"}),e.jsx("input",{...r("defaultFontSize",{valueAsNumber:!0}),type:"number",min:"8",max:"72",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),o.defaultFontSize&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.defaultFontSize.message})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-600 rounded mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comparison Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variance Threshold (%)"}),e.jsx("input",{...r("varianceThreshold",{valueAsNumber:!0}),type:"number",min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Threshold for highlighting significant variances"}),o.varianceThreshold&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.varianceThreshold.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comparison Layout"}),e.jsxs("select",{...r("comparisonLayout"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Detailed",children:"Detailed (All columns)"}),e.jsx("option",{value:"Compact",children:"Compact (Essential columns)"}),e.jsx("option",{value:"Summary",children:"Summary (Totals only)"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("showVarianceAnalysis"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Show variance analysis in reports"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("showGrowthRates"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Include growth rate calculations"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("showTrendIndicators"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Display trend indicators"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("includeComparativeAnalysis"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Include comparative analysis section"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-teal-600 rounded mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Report Customization"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Header Style"}),e.jsxs("select",{...r("reportHeaderStyle"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Minimal",children:"Minimal"}),e.jsx("option",{value:"Detailed",children:"Detailed"}),e.jsx("option",{value:"Corporate",children:"Corporate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Orientation"}),e.jsxs("select",{...r("pageOrientation"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Portrait",children:"Portrait"}),e.jsx("option",{value:"Landscape",children:"Landscape"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rounding Precision"}),e.jsxs("select",{...r("roundingPrecision",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:0,children:"Whole numbers"}),e.jsx("option",{value:1,children:"1 decimal place"}),e.jsx("option",{value:2,children:"2 decimal places"}),e.jsx("option",{value:3,children:"3 decimal places"}),e.jsx("option",{value:4,children:"4 decimal places"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zero Display Mode"}),e.jsxs("select",{...r("zeroDisplayMode"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Dash",children:"Dash (--)"}),e.jsx("option",{value:"Zero",children:"Zero (0.00)"}),e.jsx("option",{value:"Blank",children:"Blank"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("includeComplianceIndicators"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Include compliance indicators"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("showNoteNumbers"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Show note numbers in statements"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("includeSummaryStats"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Include summary statistics"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("includeSignatureSection"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Include signature section"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("autoGenerateExplanations"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Auto-generate variance explanations"})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>E(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Reset"}),e.jsx("button",{type:"submit",disabled:S.isPending||!$,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50",children:S.isPending?"Saving...":"Save Configuration"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-600 rounded mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Minor Heads"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter minor head name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyPress:s=>{if(s.key==="Enter"){const t=s.target.value;t.trim()&&l?(M.mutate({companyId:l,name:t.trim()}),s.target.value=""):l||n.error("Please select a company first")}}}),e.jsx("button",{onClick:()=>{const s=document.querySelector('input[placeholder="Enter minor head name"]'),t=s.value;t.trim()&&l?(M.mutate({companyId:l,name:t.trim()}),s.value=""):l||n.error("Please select a company first")},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:b.data?.map(s=>e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2",children:e.jsx("span",{className:"text-sm text-gray-800",children:s.name})},s.id))})}),(!b.data||b.data.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No minor heads configured"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Major Heads"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[x.data?.length||0," items"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter major head name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyPress:s=>{if(s.key==="Enter"){const t=s.target.value;A(t),s.target.value=""}}}),e.jsx("button",{onClick:()=>{const s=document.querySelector('input[placeholder="Enter major head name"]'),t=s.value;A(t),s.value=""},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:x.data?.map(s=>e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between",children:p?.id===s.id?e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsx("input",{type:"text",defaultValue:s.name,className:"flex-1 px-2 py-1 border border-blue-300 rounded text-sm",onKeyPress:t=>{t.key==="Enter"&&D(t.target.value)},autoFocus:!0}),e.jsx("button",{onClick:()=>{const t=document.querySelector(`input[defaultValue="${s.name}"]`);D(t.value)},className:"text-green-600 hover:text-green-800 p-1",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(null),className:"text-gray-600 hover:text-gray-800 p-1",children:e.jsx(T,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-800 flex-1",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>f(s),className:"text-blue-600 hover:text-blue-800 p-1",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y({type:"majorHead",id:s.id,name:s.name}),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(Y,{className:"h-4 w-4"})})]})]})},s.id))})}),(!x.data||x.data.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No major heads configured"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Groupings"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[h.data?.length||0," items"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter grouping name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyPress:s=>{if(s.key==="Enter"){const t=s.target.value;R(t),s.target.value=""}}}),e.jsx("button",{onClick:()=>{const s=document.querySelector('input[placeholder="Enter grouping name"]'),t=s.value;R(t),s.value=""},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.data?.map(s=>e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center justify-between",children:v?.id===s.id?e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsx("input",{type:"text",defaultValue:s.name,className:"flex-1 px-2 py-1 border border-purple-300 rounded text-sm",onKeyPress:t=>{t.key==="Enter"&&I(t.target.value)},autoFocus:!0}),e.jsx("button",{onClick:()=>{const t=document.querySelector(`input[defaultValue="${s.name}"]`);I(t.value)},className:"text-green-600 hover:text-green-800 p-1",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(null),className:"text-gray-600 hover:text-gray-800 p-1",children:e.jsx(T,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-800 flex-1",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>w(s),className:"text-purple-600 hover:text-purple-800 p-1",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y({type:"grouping",id:s.id,name:s.name}),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(Y,{className:"h-4 w-4"})})]})]})},s.id))})}),(!h.data||h.data.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No groupings configured"})})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Preview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"text-center",style:{fontFamily:a.defaultFont,fontSize:`${a.defaultFontSize}px`},children:[e.jsx("h4",{className:"font-bold text-gray-900",children:a.entityName||"Entity Name"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.address||"Entity Address"}),a.cinNumber&&e.jsxs("p",{className:"text-sm text-gray-600",children:["CIN: ",a.cinNumber]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Balance Sheet as at"," ",a.financialYearEnd?new Date(a.financialYearEnd).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"March 31, 2024"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["(All amounts in ",a.currency," ",a.units,")"]})]})]})}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Number Format Preview"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Positive Amount:"}),e.jsx("span",{children:"₹1,50,000.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Negative Amount:"}),e.jsx("span",{className:a.negativeColor==="Red"?"text-red-600":"",children:a.negativeColor==="Brackets"?"(₹50,000.00)":a.negativeColor==="Minus"?"-₹50,000.00":"₹50,000.00"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Comparison Settings Preview"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Variance Threshold:"}),e.jsxs("span",{children:[a.varianceThreshold,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Layout:"}),e.jsx("span",{children:a.comparisonLayout})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Show Variance:"}),e.jsx("span",{className:a.showVarianceAnalysis?"text-green-600":"text-red-600",children:a.showVarianceAnalysis?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Growth Rates:"}),e.jsx("span",{className:a.showGrowthRates?"text-green-600":"text-red-600",children:a.showGrowthRates?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Trend Indicators:"}),e.jsx("span",{className:a.showTrendIndicators?"text-green-600":"text-red-600",children:a.showTrendIndicators?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Report Settings Preview"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Header Style:"}),e.jsx("span",{children:a.reportHeaderStyle})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Page Orientation:"}),e.jsx("span",{children:a.pageOrientation})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rounding:"}),e.jsxs("span",{children:[a.roundingPrecision," decimal places"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zero Display:"}),e.jsx("span",{children:a.zeroDisplayMode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Note Numbers:"}),e.jsx("span",{className:a.showNoteNumbers?"text-green-600":"text-red-600",children:a.showNoteNumbers?"Show":"Hide"})]})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:`h-5 w-5 mr-2 ${a.entityName&&a.address&&a.financialYearStart&&a.financialYearEnd?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`text-sm ${a.entityName&&a.address&&a.financialYearStart&&a.financialYearEnd?"text-green-600":"text-gray-500"}`,children:a.entityName&&a.address&&a.financialYearStart&&a.financialYearEnd?"Configuration Complete":"Configuration Incomplete"})]})})]})]})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ae,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Delete ",g.type==="majorHead"?"Major Head":"Grouping"]})})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:['Are you sure you want to delete "',g.name,'"? This action cannot be undone and may affect existing trial balance entries.']}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{g.type==="majorHead"?U(g.id):K(g.id)},disabled:C.isPending||k.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",children:C.isPending||k.isPending?"Deleting...":"Delete"})]})]})})})]})})}export{xe as component};
